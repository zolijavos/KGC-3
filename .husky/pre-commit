#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# KGC ERP v3.0 - Pre-commit Hook
# Gyors ellenÅ‘rzÃ©sek commit elÅ‘tt

echo "ğŸ” Running pre-commit checks..."

# Lint-staged futtatÃ¡sa
pnpm exec lint-staged

# TypeScript ellenÅ‘rzÃ©s (monorepo turbo hasznÃ¡latÃ¡val)
echo "ğŸ“ Type checking project..."
# Csak akkor ellenÅ‘rizzÃ¼k, ha van .ts/.tsx fÃ¡jl a staged-ben
if git diff --cached --name-only | grep -qE '\.(ts|tsx)$'; then
  pnpm typecheck || {
    echo "âŒ TypeScript errors found. Please fix before committing."
    exit 1
  }
else
  echo "â­ï¸  No TypeScript files staged, skipping type check."
fi

echo "âœ… Pre-commit checks passed!"
